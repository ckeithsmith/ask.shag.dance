{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'/api';const api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});export const askQuestion=async function(question){let userContact=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'Anonymous';let sessionId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const requestData={question,user_contact:userContact,session_id:sessionId};const response=await api.post('/ask',requestData,{timeout:45000// 45 second timeout for complex queries\n});return response.data;}catch(error){var _error$response,_error$response2,_error$response3,_error$response4,_error$response4$data,_error$response5;console.error('API Error Details:',error);if(error.code==='ECONNABORTED'){throw new Error('Request timed out. The query might be too complex. Please try a simpler question.');}if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===429){throw new Error('Rate limit exceeded. Please wait before asking another question.');}if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===500){throw new Error('Server error occurred. Please try again in a moment.');}if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===503){throw new Error('Service temporarily unavailable. Please try again in a moment.');}if((_error$response4=error.response)!==null&&_error$response4!==void 0&&(_error$response4$data=_error$response4.data)!==null&&_error$response4$data!==void 0&&_error$response4$data.error){throw new Error(error.response.data.error);}if(error.message.includes('Network Error')){throw new Error('Network connection issue. Please check your internet connection.');}throw new Error(\"Connection failed (\".concat(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)||'unknown',\"). Please try again.\"));}};export const getSuggestedQuestions=async()=>{try{const response=await api.get('/suggested-questions');return response.data.suggestions;}catch(error){console.error('Failed to fetch suggested questions:',error);return[];}};export const checkHealth=async()=>{try{const response=await api.get('/health');return response.data;}catch(error){console.error('Health check failed:',error);return null;}};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","askQuestion","question","userContact","arguments","length","undefined","sessionId","requestData","user_contact","session_id","response","post","timeout","data","error","_error$response","_error$response2","_error$response3","_error$response4","_error$response4$data","_error$response5","console","code","Error","status","message","includes","concat","getSuggestedQuestions","get","suggestions","checkHealth"],"sources":["/project/workspace/ask.shag.dance/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport const askQuestion = async (question, userContact = 'Anonymous', sessionId = null) => {\n  try {\n    const requestData = { \n      question,\n      user_contact: userContact,\n      session_id: sessionId\n    };\n    \n    const response = await api.post('/ask', requestData, {\n      timeout: 45000 // 45 second timeout for complex queries\n    });\n    return response.data;\n  } catch (error) {\n    console.error('API Error Details:', error);\n    \n    if (error.code === 'ECONNABORTED') {\n      throw new Error('Request timed out. The query might be too complex. Please try a simpler question.');\n    }\n    if (error.response?.status === 429) {\n      throw new Error('Rate limit exceeded. Please wait before asking another question.');\n    }\n    if (error.response?.status === 500) {\n      throw new Error('Server error occurred. Please try again in a moment.');\n    }\n    if (error.response?.status === 503) {\n      throw new Error('Service temporarily unavailable. Please try again in a moment.');\n    }\n    if (error.response?.data?.error) {\n      throw new Error(error.response.data.error);\n    }\n    if (error.message.includes('Network Error')) {\n      throw new Error('Network connection issue. Please check your internet connection.');\n    }\n    throw new Error(`Connection failed (${error.response?.status || 'unknown'}). Please try again.`);\n  }\n};\n\nexport const getSuggestedQuestions = async () => {\n  try {\n    const response = await api.get('/suggested-questions');\n    return response.data.suggestions;\n  } catch (error) {\n    console.error('Failed to fetch suggested questions:', error);\n    return [];\n  }\n};\n\nexport const checkHealth = async () => {\n  try {\n    const response = await api.get('/health');\n    return response.data;\n  } catch (error) {\n    console.error('Health check failed:', error);\n    return null;\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}