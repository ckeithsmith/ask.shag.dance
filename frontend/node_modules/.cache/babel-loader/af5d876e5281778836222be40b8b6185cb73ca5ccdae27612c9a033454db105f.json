{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'./App.css';import ChatMessage from'./components/ChatMessage';import ChatInput from'./components/ChatInput';import LoadingSpinner from'./components/LoadingSpinner';import*as api from'./services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useState([]);const[isLoading,setIsLoading]=useState(false);const[suggestedQuestions,setSuggestedQuestions]=useState([]);const[error,setError]=useState(null);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);useEffect(()=>{// Load suggested questions on startup\nconst loadSuggestions=async()=>{try{const suggestions=await api.getSuggestedQuestions();setSuggestedQuestions(suggestions);}catch(error){console.error('Failed to load suggestions:',error);}};loadSuggestions();},[]);const handleSendMessage=async userMessage=>{if(!userMessage.trim()||isLoading)return;const newUserMessage={id:Date.now(),text:userMessage,sender:'user',timestamp:new Date()};setMessages(prev=>[...prev,newUserMessage]);setIsLoading(true);setError(null);try{const response=await api.askQuestion(userMessage);const botMessage={id:Date.now()+1,text:response.answer||response,// Handle both {answer: \"...\"} and direct string responses\nsender:'assistant',timestamp:new Date()};setMessages(prev=>[...prev,botMessage]);}catch(error){console.error('Error getting response:',error);const errorMessage={id:Date.now()+1,text:\"Sorry, I encountered an error: \".concat(error.message,\". Please try again or check if the service is available.\"),sender:'assistant',timestamp:new Date(),isError:true};setMessages(prev=>[...prev,errorMessage]);setError(error.message);}finally{setIsLoading(false);}};const handleSuggestionClick=question=>{handleSendMessage(question);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-blue-600 text-white p-4 shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"CSA Shag Archive Q&A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-100 text-sm\",children:\"Ask questions about Competitive Shaggers Association history and contests\"})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-4xl mx-auto flex-1 flex flex-col h-screen\",children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-blue-900 mb-3\",children:\"Welcome to the CSA Shag Archive! \\uD83D\\uDD7A\\uD83D\\uDC83\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-800 mb-4\",children:\"I'm your guide to the complete Competitive Shaggers Association database, covering decades of shag dance competitions, rules, and championship history.\"}),suggestedQuestions.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-800 font-medium mb-3\",children:\"Try asking me about:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2\",children:suggestedQuestions.map((question,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSuggestionClick(question),className:\"text-left p-3 bg-white border border-blue-300 rounded hover:bg-blue-100 hover:border-blue-400 transition-colors text-sm text-blue-900\",children:question},index))})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto px-6 pb-4\",children:[messages.map(message=>/*#__PURE__*/_jsx(ChatMessage,{message:message},message.id)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-4\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(ChatInput,{onSendMessage:handleSendMessage,isLoading:isLoading})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-gray-100 text-center py-2 text-xs text-gray-600\",children:/*#__PURE__*/_jsx(\"p\",{children:\"CSA Archive data spans 1990-2025 \\u2022 Built with \\uD83D\\uDD7A for the shag community\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","ChatMessage","ChatInput","LoadingSpinner","api","jsx","_jsx","jsxs","_jsxs","App","messages","setMessages","isLoading","setIsLoading","suggestedQuestions","setSuggestedQuestions","error","setError","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","loadSuggestions","suggestions","getSuggestedQuestions","console","handleSendMessage","userMessage","trim","newUserMessage","id","Date","now","text","sender","timestamp","prev","response","askQuestion","botMessage","answer","errorMessage","concat","message","isError","handleSuggestionClick","question","className","children","length","map","index","onClick","ref","onSendMessage"],"sources":["/project/workspace/ask.shag.dance/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport ChatMessage from './components/ChatMessage';\nimport ChatInput from './components/ChatInput';\nimport LoadingSpinner from './components/LoadingSpinner';\nimport * as api from './services/api';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [suggestedQuestions, setSuggestedQuestions] = useState([]);\n  const [error, setError] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    // Load suggested questions on startup\n    const loadSuggestions = async () => {\n      try {\n        const suggestions = await api.getSuggestedQuestions();\n        setSuggestedQuestions(suggestions);\n      } catch (error) {\n        console.error('Failed to load suggestions:', error);\n      }\n    };\n    loadSuggestions();\n  }, []);\n\n  const handleSendMessage = async (userMessage) => {\n    if (!userMessage.trim() || isLoading) return;\n\n    const newUserMessage = {\n      id: Date.now(),\n      text: userMessage,\n      sender: 'user',\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, newUserMessage]);\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await api.askQuestion(userMessage);\n      \n      const botMessage = {\n        id: Date.now() + 1,\n        text: response.answer || response,  // Handle both {answer: \"...\"} and direct string responses\n        sender: 'assistant',\n        timestamp: new Date()\n      };\n\n      setMessages(prev => [...prev, botMessage]);\n    } catch (error) {\n      console.error('Error getting response:', error);\n      \n      const errorMessage = {\n        id: Date.now() + 1,\n        text: `Sorry, I encountered an error: ${error.message}. Please try again or check if the service is available.`,\n        sender: 'assistant',\n        timestamp: new Date(),\n        isError: true\n      };\n\n      setMessages(prev => [...prev, errorMessage]);\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSuggestionClick = (question) => {\n    handleSendMessage(question);\n  };\n\n  return (\n    <div className=\"App\">\n      {/* Header */}\n      <header className=\"bg-blue-600 text-white p-4 shadow-lg\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h1 className=\"text-2xl font-bold\">CSA Shag Archive Q&A</h1>\n          <p className=\"text-blue-100 text-sm\">Ask questions about Competitive Shaggers Association history and contests</p>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-4xl mx-auto flex-1 flex flex-col h-screen\">\n        {/* Welcome Message and Suggested Questions */}\n        {messages.length === 0 && (\n          <div className=\"p-6\">\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6\">\n              <h2 className=\"text-xl font-semibold text-blue-900 mb-3\">\n                Welcome to the CSA Shag Archive! ðŸ•ºðŸ’ƒ\n              </h2>\n              <p className=\"text-blue-800 mb-4\">\n                I'm your guide to the complete Competitive Shaggers Association database, \n                covering decades of shag dance competitions, rules, and championship history.\n              </p>\n              \n              {suggestedQuestions.length > 0 && (\n                <div>\n                  <p className=\"text-blue-800 font-medium mb-3\">Try asking me about:</p>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    {suggestedQuestions.map((question, index) => (\n                      <button\n                        key={index}\n                        onClick={() => handleSuggestionClick(question)}\n                        className=\"text-left p-3 bg-white border border-blue-300 rounded hover:bg-blue-100 hover:border-blue-400 transition-colors text-sm text-blue-900\"\n                      >\n                        {question}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Messages Area */}\n        <div className=\"flex-1 overflow-y-auto px-6 pb-4\">\n          {messages.map(message => (\n            <ChatMessage key={message.id} message={message} />\n          ))}\n          \n          {isLoading && (\n            <div className=\"flex justify-center py-4\">\n              <LoadingSpinner />\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Chat Input */}\n        <ChatInput onSendMessage={handleSendMessage} isLoading={isLoading} />\n      </main>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-100 text-center py-2 text-xs text-gray-600\">\n        <p>CSA Archive data spans 1990-2025 â€¢ Built with ðŸ•º for the shag community</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}